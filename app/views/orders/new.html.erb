

<% mtgox_trades %>

Lowest asking price from MT GOX:  [ Rate: <b><%= @ask_gox[0] %></b>, Amount: <b>$<%= @ask_gox[1]  %></b> ] <br>
<% unless @ask.nil? %>
    Lowest asking price on site:  [ Rate: <b><%= @ask.rate %></b>  , Amount: <b>$<%= @ask.dollar_amount  %></b> ] <br>
<% end %>
Highest bid from MT GOX: [ Rate: <b><%= @bid_gox[0] %></b>, Amount: <b>$<%= @bid_gox[1]  %></b> ]    <br>
<% unless @bid.nil? %>
    Highest bid price on site:  [ Rate: <b><%= @bid.rate %></b>, Amount: <b>$<%= @bid.dollar_amount  %></b> ] <br>
<% end %>


<br>
<%= form_for(Order.new) do |f| %>
    <%= error_messages_for :order %>
    Rate (dollars per bitcoin): <%= f.text_field :rate %><br>
    BTC Amount: <%= f.text_field :btc_amount  %><br>

    Dollar Amount: <%= f.text_field :dollar_amount %>     <br>

    Buy: <%= f.radio_button :order_type, :bid,  :class => :radio, :checked => true %> <br>
    Sell: <%= f.radio_button :order_type, :ask, :class => :radio %>
    <%= f.submit :process %>

<% end %>



<script>
    $('.radio').click(function(){
        //alert($(this).val());
    });
    $('#btc_amount').keypress(function(){
        var that = this;
        setTimeout(function(){
            console.log($(that).val());
            $('#dollar_amount').val($(that).val() * $('#rate').val());
        }, 1);

    });
    $('#dollar_amount').keypress(function(){
        var that = this;
        setTimeout(function(){
            console.log($(that).val());
            $('#btc_amount').val($(that).val() / $('#rate').val());
        }, 1);

    });
    $('#order_rate').keypress(function(){
        $('#dollar_amount').attr('disabled',false);
        $('#btc_amount').attr('disabled',false)
    })

</script>